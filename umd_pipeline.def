Bootstrap: docker
From: pytorch/pytorch:latest

%files
    ./metamodel* /
    ./tools/ /
    ./architectures/ /
    ./trojai/ /
    ./umd_pipeline.py /

%post
    apt-get update
    apt-get install -y libsm6 libxext6 libxrender-dev libgtk2.0-dev libmagickwand-dev
    pip install --no-cache-dir opencv-python pandas numpy matplotlib pillow scipy seaborn wand scikit-learn scikit-image dill pyllist nltk tqdm
    chmod 777 /umd_pipeline.py

%runscript
    exec python3 /umd_pipeline.py "$@"
