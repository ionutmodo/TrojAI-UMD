Bootstrap: docker
From: pytorch/pytorch:latest

%post
    apt-get update
    apt-get install -y ffmpeg libsm6 libxext6 libxrender-dev libgtk2.0-dev libmagickwand-dev vim git
    pip install --no-cache-dir tensorflow keras numpy==1.18.5 pandas opencv-python matplotlib pillow scipy seaborn wand scikit-learn scikit-image dill pyllist nltk tqdm
    cd /
    git clone git@github.com:ionutmodo/TrojAI-UMD.git
    chmod -R 777 /TrojAI-UMD

%runscript
    exec python3 -W ignore /TrojAI-UMD/umd_pipeline.py "$@"
